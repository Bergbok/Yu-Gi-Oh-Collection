---
import Layout from '../layouts/Layout.astro';
import About from '../components/About.astro';
import Price from '../components/Price.astro';
import Stats from '../components/Stats.astro';
import Controls from '../components/Controls.astro';
import CardOverlay from '../components/CardOverlay.astro';
import CardGrid from '../components/CardGrid.astro';
import { getCollection } from 'astro:content';

const cards = await getCollection('cards');
---

<Layout>
	<main>
		<div class='top-section'>
			<About />
			<div class='right-column'>
				<Price />
				<Controls />
			</div>
		</div>
		<Stats />
		<CardGrid />
	</main>
	<div id='overlays'>{cards.map(card => <CardOverlay card={card.data} /> )}</div>
</Layout>

<style>
main {
	margin: 0 auto;
	max-width: 130rem;
	padding: 2rem;
	width: 90%;
}

.top-section {
	display: flex;
	gap: 1.25rem;
	margin-bottom: 1.25rem;

	& > * {
		flex: 1;
	}
}

.right-column {
	display: flex;
	flex-direction: column;
	gap: 1.25rem;
}

@media (max-width: 1000px) {
	.top-section {
		flex-direction: column;

		& > * {
			flex: none;
		}
	}

	.right-column {
		gap: 1rem;
	}
}
</style>
